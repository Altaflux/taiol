Get data -

curl -L -O https://github.com/starksm64/RaspberryPiBeaconParser/blob/master/data/FourScannersRun%231-2015-03-07.json.gz\?raw=true

mv FourScannersRun%231-2015-03-07.json.gz\?raw=true FourScannersRun#1-2015-03-07.json.gz

Massage data, need 1:1 event:line -

gunzip -c FourScannersRun#1-2015-03-07.json.gz | sed 's/}{/}\n{/' | awk '{ORS=""; print} /}/ {ORS="\n"; print ""}' > data.json

Run stage0.py -

(only need to do these once)
sudo docker build -t spark docker-spark
sudo docker build -t taiol docker-taiol

sudo docker run -v $PWD/data.json:/data.json -v $PWD/stage0.py:/stage0.py taiol spark-submit stage0.py -a amqp://1.2.3.4/name data.json
